<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lawn Tracker - Home</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="navbar">
    <h1>Lawn Tracker</h1>
    <a href="coach.html" class="coach-link">Open Lawn Coach ‚Üí</a>
</nav>

<div class="container">
    <div class="profile-card" id="profileHeader">
        <p id="profileText">Lawn size not set. <a href="coach.html">Measure now</a></p>
    </div>

    <section class="card">
        <h2>üßÆ Bag Rate Calculator</h2>
        <p>Calculate how much fertilizer you need for your specific lawn.</p>
        <div class="calc-grid">
            <div class="input-group">
                <label>Target Nitrogen (lbs/1000sqft)</label>
                <input type="number" id="targetN" value="1.0" step="0.1">
            </div>
            <div class="input-group">
                <label>Bag Nitrogen % (First # on bag)</label>
                <input type="number" id="bagN" placeholder="e.g. 24">
            </div>
            <button onclick="calculateBags()">Calculate</button>
        </div>
        <div id="calcResult" class="result-box"></div>
    </section>

    </div>

<script>
    function loadProfile() {
        const sqFt = localStorage.getItem('lawnSqFt');
        const display = document.getElementById('profileText');
        if (sqFt) {
            display.innerHTML = `üè† My Lawn Size: <strong>${sqFt} sq ft</strong> | <a href="coach.html">Update</a>`;
        }
    }

    function calculateBags() {
        const sqFt = localStorage.getItem('lawnSqFt');
        const targetN = document.getElementById('targetN').value;
        const bagN = document.getElementById('bagN').value;
        const resultDiv = document.getElementById('calcResult');

        if (!sqFt) {
            resultDiv.innerHTML = "‚ö†Ô∏è Please set your lawn size in the Coach first!";
            return;
        }
        if (!bagN) {
            resultDiv.innerHTML = "‚ö†Ô∏è Enter the Nitrogen percentage from the bag.";
            return;
        }

        // Formula: (Target Lbs / (Bag N / 100)) * (Total SqFt / 1000)
        const totalLbsNeeded = (targetN / (bagN / 100)) * (sqFt / 1000);
        
        resultDiv.innerHTML = `
            <strong>Results:</strong><br>
            You need <strong>${totalLbsNeeded.toFixed(1)} lbs</strong> of this fertilizer to cover your ${sqFt} sq ft lawn at a rate of ${targetN}lb N.
        `;
    }

    window.onload = loadProfile;
</script>
</body>
</html>
